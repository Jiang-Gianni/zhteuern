{
  "version": 3,
  "sources": ["../../browser/fetch.ts", "../../browser/init.ts", "../../browser/input.ts", "../../browser/intersect.ts", "../../browser/window.ts"],
  "sourcesContent": ["import './browser'\n\nfunction applyJson(updates: Update[]) {\n    for (let index = 0; index < updates.length; index++) {\n        const update = updates[index];\n        const targets = document.querySelectorAll(update.selector);\n        if (targets == null || targets.length == 0) {\n            console.error(`no target found for selector ${update.selector}`)\n            return;\n        }\n        for (let index = 0; index < targets.length; index++) {\n            const target = targets[index];\n            for (const [key, value] of Object.entries(update.text ?? {})) {\n                target[key] = value;\n            }\n            for (const [key, value] of Object.entries(update.integer ?? {})) {\n                target[key] = value;\n            }\n            for (const [key, value] of Object.entries(update.boolean ?? {})) {\n                target[key] = value;\n            }\n            for (const [key, value] of Object.entries(update.attribute ?? {})) {\n                target.setAttribute(key, value);\n            }\n            for (const [key, value] of Object.entries(update.style ?? {})) {\n                (target as HTMLElement).style.setProperty(key, value);\n            }\n            if (update.remove ?? false) {\n                target.remove();\n            }\n            // maybe?\n            // https://developer.mozilla.org/en-US/docs/Web/API/Element/animate\n            // https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent\n            // https://developer.mozilla.org/en-US/docs/Web/API/Node/normalize\n            // https://developer.mozilla.org/en-US/docs/Web/API/Element/releasePointerCapture\n            // https://developer.mozilla.org/en-US/docs/Web/API/Element/setPointerCapture\n            // https://developer.mozilla.org/en-US/docs/Web/API/Element/requestFullscreen\n            // https://developer.mozilla.org/en-US/docs/Web/API/Element/requestPointerLock\n            // https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView\n        }\n    }\n};\n\nfunction applyHtml(\n    selector: string,\n    event: string,\n    template: HTMLTemplateElement\n) {\n    let elements = template.content.children;\n    for (let index = 0; index < elements.length; index++) {\n        const element = elements[index];\n        if (element.tagName == 'SCRIPT') {\n            const newScript = document.createElement(\"script\");\n            newScript.textContent = element.textContent;\n            elements[index].replaceWith(newScript);\n        }\n    }\n\n    if (event == \"\") { // no event -> replace by ID\n        for (var child of Array.from(elements)) {\n            const target = document.getElementById((child as Element).id)\n            if (target == null) {\n                console.error(`no target found for id ${(child as Element).id}`)\n                continue\n            }\n            target.replaceWith(child)\n        }\n        return\n    }\n\n    const targets = document.querySelectorAll(selector)\n    if (targets == null || targets.length == 0) {\n        console.error(`no target found for selector ${selector}`)\n        return;\n    }\n    for (let index = 0; index < targets.length; index++) {\n        const target = targets[index];\n        if (event == \"replace\") {\n            target.replaceWith(...elements)\n        } else if (event == \"prepend\") {\n            target.prepend(...elements)\n        } else if (event == \"append\") {\n            target.append(...elements)\n        } else if (event == \"after\") {\n            target.after(...elements)\n        } else if (event == \"before\") {\n            target.before(...elements)\n        }\n    }\n};\n\n\nexport async function handleResponse(\n    response: Response\n) {\n    if (response.status >= 400) {\n        console.error(`status ${response.status}, url ${response.url}`);\n        return;\n    }\n\n    var localApplyHtml = applyHtml\n    if ('startViewTransition' in document) {\n        localApplyHtml = (selector: string, event: string, template: HTMLTemplateElement) => {\n            document.startViewTransition(() => {\n                applyHtml(selector, event, template)\n            })\n        }\n    }\n\n    var localApplyJson = applyJson\n    if ('startViewTransition' in document) {\n        localApplyJson = (updates: Update[]) => {\n            document.startViewTransition(() => {\n                applyJson(updates)\n            })\n        }\n    }\n\n    if (response.headers.get('Content-Type')?.includes('text/html')) {\n        const template = document.createElement('template')\n        template.innerHTML = await response.text();\n        localApplyHtml(\n            response.headers.get('X-Id') || '',\n            response.headers.get('X-Event') || '',\n            template,\n        )\n        return\n    }\n\n    if (response.headers.get('Content-Type')?.includes('application/json')) {\n        localApplyJson(JSON.parse(await response.text()) as Update[]);\n        return\n    }\n\n    if (!response.headers.get('Content-Type')?.includes('text/event-stream')) {\n        return\n    }\n\n\n    const reader = response.body!.getReader()\n    const decoder = new TextDecoder('utf-8')\n\n    let buffer = ''\n    let partialEventLines: string[] = []\n\n    while (true) {\n        const { done, value } = await reader.read()\n        if (done) break\n\n        buffer += decoder.decode(value, { stream: true })\n\n        const lines = buffer.split('\\n')\n        buffer = lines.pop() || ''\n        for (let line of lines) {\n            if (line.trim() !== '') {\n                partialEventLines.push(line)\n            } else {\n                let event = ''\n                let id = ''\n\n                for (let i = 0; i < partialEventLines.length; i++) {\n                    let eventLine = partialEventLines[i]\n                    if (eventLine.startsWith('event:')) {\n                        event = eventLine.slice(6).trim()\n                        partialEventLines[i] = ''\n                    } else if (eventLine.startsWith('id:')) {\n                        id = eventLine.slice(3).trim()\n                        partialEventLines[i] = ''\n                    } else if (eventLine.startsWith('data:')) {\n                        partialEventLines[i] = eventLine.slice(5).trim()\n                    } else {\n                        partialEventLines[i] = ''\n                    }\n                }\n\n                if (event == 'dom') {\n                    localApplyJson(JSON.parse(partialEventLines.join('\\n')) as Update[]);\n                } else {\n                    const template = document.createElement('template')\n                    template.innerHTML = partialEventLines.join('\\n')\n                    localApplyHtml(id, event, template)\n                }\n                partialEventLines = []\n            }\n        }\n    }\n};\n\nexport function extractInputs(el: Element): string {\n    const inputs = el.querySelectorAll('input, select, textarea')\n    const formData = new FormData();\n    for (const input of inputs) {\n        if (\n            (\n                input instanceof HTMLInputElement ||\n                input instanceof HTMLTextAreaElement ||\n                input instanceof HTMLSelectElement\n            ) &&\n            input.name\n        ) {\n            if (input instanceof HTMLInputElement && input.type === 'checkbox') {\n                formData.append(input.name, input.checked ? '1' : '0')\n            } else {\n                formData.append(input.name, input.value)\n            }\n        }\n    }\n    return JSON.stringify(Object.fromEntries(formData))\n};\n\nexport async function elementFetch(el: Element, endpoint: string | null) {\n    if (endpoint == null || endpoint == '') {\n        console.warn(`endpoint not specified for element`)\n        console.log(el as Object)\n        return;\n    }\n    if (endpoint == \"window.location.pathname\") {\n        endpoint = window.location.pathname\n    }\n    if (endpoint.startsWith(\"eval\")) {\n        endpoint = window.eval(endpoint)\n    }\n    var method = el.getAttribute('method') || 'GET'\n    var success = false\n    for (let index = 0; index <= Number(el.getAttribute('retry')); index++) {\n        let init: RequestInit = {\n            method: method,\n        }\n        init.body = method == 'GET' ? null : extractInputs(el)\n\n        await fetch(endpoint!, init).then(handleResponse)\n            .then(() => {\n                success = true\n            })\n            .catch((e) => {\n                console.warn(`retry: ${index}, method: ${method}, url ${endpoint}, body: ${init.body}, error: ${e}`)\n                success = false\n            })\n        if (success) {\n            break\n        }\n        await new Promise(resolve => setTimeout(resolve, 1000));\n    }\n};", "import { elementFetch } from './fetch'\n\nconst initFetch = \"init-fetch\";\n\nasync function initFunc(el: Element) {\n    if (!el.hasAttribute(initFetch)) return;\n    el.dispatchEvent(new CustomEvent(initFetch, { bubbles: true }));\n    var endpoint = el.getAttribute(initFetch)\n    el.removeAttribute(initFetch);\n    elementFetch(el, endpoint)\n}\n\nnew MutationObserver(ms => {\n    for (const m of ms) {\n        if (m.target instanceof HTMLElement) initFunc(m.target);\n    }\n}).observe(document.body, {\n    childList: true,\n    subtree: true,\n    attributes: true,\n    attributeFilter: [initFetch]\n});\n\ndocument.querySelectorAll(`[${initFetch}]`).forEach(el => {\n    if (el instanceof HTMLElement) initFunc(el);\n});", "import { elementFetch } from './fetch'\n\nconst inputFetch = \"input-fetch\";\n\nasync function inputFunc(el: Element) {\n    if (!el.hasAttribute(inputFetch)) return;\n    el.addEventListener('input', (ev) => {\n        elementFetch(el, el.getAttribute(inputFetch));\n    })\n}\n\nnew MutationObserver(ms => {\n    for (const m of ms) {\n        for (const a of m.addedNodes) {\n            if (a instanceof HTMLElement) inputFunc(a);\n        }\n    }\n}).observe(document.body, {\n    childList: true,\n    subtree: true,\n    attributes: true,\n    attributeFilter: [inputFetch]\n});\n\ndocument.querySelectorAll(`[${inputFetch}]`).forEach(el => {\n    if (el instanceof HTMLElement) inputFunc(el);\n});", "import { elementFetch } from './fetch'\n\nconst intersectFetch = \"intersect-fetch\";\nconst intersectObserved = \"intersect-observed\";\n\nasync function intersectFunc(el: Element) {\n    if (!el.hasAttribute(intersectFetch)) return;\n    el.dispatchEvent(new CustomEvent(intersectFetch, { bubbles: true }));\n    var endpoint = el.getAttribute(intersectFetch)\n    el.removeAttribute(intersectFetch);\n    elementFetch(el, endpoint)\n}\n\nlet intObs = new IntersectionObserver((entries) => {\n    for (const entry of entries) {\n        if (entry.isIntersecting) {\n            intersectFunc(entry.target)\n            intObs.unobserve(entry.target);\n        }\n    }\n},)\n\nnew MutationObserver(ms => {\n    for (const m of ms) {\n        if (m.target instanceof HTMLElement) {\n            if (m.target.getAttribute(intersectObserved) || !m.target.getAttribute(intersectFetch)) {\n                return\n            }\n            intObs.observe(m.target);\n            m.target.setAttribute(intersectObserved, \"true\");\n        };\n    }\n}).observe(document.body, {\n    childList: true,\n    subtree: true,\n    attributes: true,\n    attributeFilter: [intersectFetch]\n});\n\ndocument.querySelectorAll(`[${intersectFetch}]`).forEach((el) => {\n    if (el instanceof HTMLElement) {\n        if (el.getAttribute(intersectObserved) || !el.getAttribute(intersectFetch)) {\n            return\n        }\n        intObs.observe(el);\n        el.setAttribute(intersectObserved, \"true\");\n    }\n});", "window.addEventListener('keydown', (event) => {\n    if (event.key == 'Escape') {\n        return (document.activeElement as any)?.blur();\n    }\n    if (['Shift', 'Alt', 'Meta', 'Enter', 'Escape'].includes(event.key)) { return; }\n    if (event.ctrlKey || event.metaKey) { return; }\n    if (event.target instanceof HTMLInputElement && event.target.type === \"number\") {\n        ['e', 'E', '+', '-', '.', ','].includes(event.key) && event.preventDefault()\n        if (event.target.value !== '') {\n            const cleaned = String(Number(event.target.value));\n            if (event.target.value !== cleaned) {\n                event.target.value = cleaned;\n            }\n        } else {\n            event.target.value = \"0\"\n        }\n    }\n    let target = document.querySelectorAll(`.active [key-down='${event.key}'], #navigation [key-down='${event.key}']`);\n    if (target.length > 0) {\n        event.preventDefault();\n        (target[0] as any).scrollIntoViewIfNeeded();\n        (target[0] as HTMLElement).focus();\n        (target[0] as HTMLElement).click();\n    }\n});\n\nfunction setActivePage() {\n    var hash = window.location.hash\n    if (hash == null || hash == '') {\n        return\n    }\n    document.querySelectorAll(`section.page.active`).forEach((el) => {\n        el.classList.remove('active')\n    })\n    document.querySelectorAll(`section.page[name=\"${hash.slice(1)}\"]`).forEach((el) => {\n        el.classList.add('active')\n    })\n}\n\nsetActivePage()\nwindow.addEventListener('hashchange', setActivePage)\n\nwindow.addEventListener('click', (event) => {\n    var el = event.target as Element\n    var scrollY = el.getAttribute(\"click-scroll-y\")\n    if (!scrollY) {\n        return;\n    }\n    window.scrollBy(0, scrollY as any);\n})"],
  "mappings": "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",
  "names": ["applyJson", "updates", "index", "update", "targets", "target", "key", "value", "applyHtml", "selector", "event", "template", "elements", "element", "newScript", "child", "handleResponse", "response", "localApplyHtml", "localApplyJson", "reader", "decoder", "buffer", "partialEventLines", "done", "lines", "line", "id", "i", "eventLine", "extractInputs", "el", "inputs", "formData", "input", "elementFetch", "endpoint", "method", "success", "init", "e", "resolve", "initFetch", "initFunc", "el", "endpoint", "elementFetch", "ms", "m", "inputFetch", "inputFunc", "el", "ev", "elementFetch", "ms", "m", "a", "intersectFetch", "intersectObserved", "intersectFunc", "el", "endpoint", "elementFetch", "intObs", "entries", "entry", "ms", "m", "event", "cleaned", "target", "setActivePage", "hash", "el", "scrollY"]
}
