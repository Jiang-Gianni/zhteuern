function w(e){for(let t=0;t<e.length;t++){let r=e[t],i=document.querySelectorAll(r.selector);if(i==null||i.length==0){console.error(`no target found for selector ${r.selector}`);return}for(let c=0;c<i.length;c++){let a=i[c];for(let[n,o]of Object.entries(r.text??{}))a[n]=o;for(let[n,o]of Object.entries(r.integer??{}))a[n]=o;for(let[n,o]of Object.entries(r.boolean??{}))a[n]=o;for(let[n,o]of Object.entries(r.attribute??{}))a.setAttribute(n,o);for(let[n,o]of Object.entries(r.style??{}))a.style.setProperty(n,o);(r.remove??!1)&&a.remove()}}}function A(e,t,r){let i=r.content.children;for(let n=0;n<i.length;n++){let o=i[n];if(o.tagName=="SCRIPT"){let u=document.createElement("script");u.textContent=o.textContent,i[n].replaceWith(u)}}if(t==""){for(var c of Array.from(i)){let n=document.getElementById(c.id);if(n==null){console.error(`no target found for id ${c.id}`);continue}n.replaceWith(c)}return}let a=document.querySelectorAll(e);if(a==null||a.length==0){console.error(`no target found for selector ${e}`);return}for(let n=0;n<a.length;n++){let o=a[n];t=="replace"?o.replaceWith(...i):t=="prepend"?o.prepend(...i):t=="append"?o.append(...i):t=="after"?o.after(...i):t=="before"&&o.before(...i)}}async function M(e){if(e.status>=400){console.error(`status ${e.status}, url ${e.url}`);return}var t=A;"startViewTransition"in document&&(t=(o,u,p)=>{document.startViewTransition(()=>{A(o,u,p)})});var r=w;if("startViewTransition"in document&&(r=o=>{document.startViewTransition(()=>{w(o)})}),e.headers.get("Content-Type")?.includes("text/html")){let o=document.createElement("template");o.innerHTML=await e.text(),t(e.headers.get("X-Id")||"",e.headers.get("X-Event")||"",o);return}if(e.headers.get("Content-Type")?.includes("application/json")){r(JSON.parse(await e.text()));return}if(!e.headers.get("Content-Type")?.includes("text/event-stream"))return;let i=e.body.getReader(),c=new TextDecoder("utf-8"),a="",n=[];for(;;){let{done:o,value:u}=await i.read();if(o)break;a+=c.decode(u,{stream:!0});let p=a.split(`
`);a=p.pop()||"";for(let E of p)if(E.trim()!=="")n.push(E);else{let h="",v="";for(let s=0;s<n.length;s++){let f=n[s];f.startsWith("event:")?(h=f.slice(6).trim(),n[s]=""):f.startsWith("id:")?(v=f.slice(3).trim(),n[s]=""):f.startsWith("data:")?n[s]=f.slice(5).trim():n[s]=""}if(h=="dom")r(JSON.parse(n.join(`
`)));else{let s=document.createElement("template");s.innerHTML=n.join(`
`),t(v,h,s)}n=[]}}}function x(e){let t=e.querySelectorAll("input, select, textarea"),r=new FormData;for(let i of t)(i instanceof HTMLInputElement||i instanceof HTMLTextAreaElement||i instanceof HTMLSelectElement)&&i.name&&(i instanceof HTMLInputElement&&i.type==="checkbox"?r.append(i.name,i.checked?"1":"0"):r.append(i.name,i.value));return JSON.stringify(Object.fromEntries(r))}async function d(el,endpoint){if(endpoint==null||endpoint==""){console.warn("endpoint not specified for element"),console.log(el);return}endpoint=="window.location.pathname"&&(endpoint=window.location.pathname),endpoint.startsWith("eval")&&(endpoint=eval(endpoint));var method=el.getAttribute("method")||"GET",success=!1;for(let e=0;e<=Number(el.getAttribute("retry"));e++){let t={method};if(t.body=method=="GET"?null:x(el),await fetch(endpoint,t).then(M).then(()=>{success=!0}).catch(r=>{console.warn(`retry: ${e}, method: ${method}, url ${endpoint}, body: ${t.body}, error: ${r}`),success=!1}),success)break;await new Promise(r=>setTimeout(r,1e3))}}var m="init-fetch";async function T(e){if(e.hasAttribute(m)){e.dispatchEvent(new CustomEvent(m,{bubbles:!0}));var t=e.getAttribute(m);e.removeAttribute(m),d(e,t)}}new MutationObserver(e=>{for(let t of e)t.target instanceof HTMLElement&&T(t.target)}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:[m]});document.querySelectorAll(`[${m}]`).forEach(e=>{e instanceof HTMLElement&&T(e)});var g="input-fetch";async function L(e){e.hasAttribute(g)&&e.addEventListener("input",t=>{d(e,e.getAttribute(g))})}new MutationObserver(e=>{for(let t of e)for(let r of t.addedNodes)r instanceof HTMLElement&&L(r)}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:[g]});document.querySelectorAll(`[${g}]`).forEach(e=>{e instanceof HTMLElement&&L(e)});var l="intersect-fetch",b="intersect-observed";async function H(e){if(e.hasAttribute(l)){e.dispatchEvent(new CustomEvent(l,{bubbles:!0}));var t=e.getAttribute(l);e.removeAttribute(l),d(e,t)}}var y=new IntersectionObserver(e=>{for(let t of e)t.isIntersecting&&(H(t.target),y.unobserve(t.target))});new MutationObserver(e=>{for(let t of e)if(t.target instanceof HTMLElement){if(t.target.getAttribute(b)||!t.target.getAttribute(l))return;y.observe(t.target),t.target.setAttribute(b,"true")}}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:[l]});document.querySelectorAll(`[${l}]`).forEach(e=>{if(e instanceof HTMLElement){if(e.getAttribute(b)||!e.getAttribute(l))return;y.observe(e),e.setAttribute(b,"true")}});window.addEventListener("keydown",e=>{if(e.key=="Escape")return document.activeElement?.blur();if(["Shift","Alt","Meta","Enter","Escape"].includes(e.key)||e.ctrlKey||e.metaKey)return;if(e.target instanceof HTMLInputElement&&e.target.type==="number")if(["e","E","+","-",".",","].includes(e.key)&&e.preventDefault(),e.target.value!==""){let r=String(Number(e.target.value));e.target.value!==r&&(e.target.value=r)}else e.target.value="0";let t=document.querySelectorAll(`.active [key-down='${e.key}'], #navigation [key-down='${e.key}']`);t.length>0&&(e.preventDefault(),t[0].scrollIntoViewIfNeeded(),t[0].focus(),t[0].click())});function k(){var e=window.location.hash;if(e==null||e==""){console.warn("empty hash");return}document.querySelectorAll("section.page.active").forEach(t=>{t.classList.remove("active")}),document.querySelectorAll(`section.page[name="${e.slice(1)}"]`).forEach(t=>{t.classList.add("active")})}k();window.addEventListener("hashchange",k);window.addEventListener("click",e=>{var t=e.target,r=t.getAttribute("click-scroll-y");r&&window.scrollBy(0,r)});
//# sourceMappingURL=zhteuern.js.map
